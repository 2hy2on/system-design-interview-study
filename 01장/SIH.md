## 사용자 수에 따른 규모 확장성
단일서버
---
웹 - 앱 - 데이터베이스 - 캐시 등이 한 서버에서 동작

데이터베이스
---
웹 계층과 데이터 계층 분리 -> 독립적 확장 가능

비 관계형 데이터베이스가 좋은 선택일 수 있는 이유
- 아주 낮은 응답 지연시간(latency)이 요구됨
- 다루는 데이터가 비정형이라 관계형 데이터가 아님
- 데이터(JSON,YAML,XML 등)를 직렬화하거나 역질렬화 할 수 있기만 하면 됨
- 아주 많은 양의 데이터를 저장할 필요가 있음

수직적 규모 확장 VS 수평적 규모 확장
---
스케일 업/ 스케일 아웃

수직적 규모 확장 한계
- 장애에 대한 바동 복구 방안이나 다중화 방안이 없음

로드밸런서
- 트래픽 부하를 고르게 분산하는 역할
- 사용자는 로드밸런서의 Public IP로 접속
- 서버 간 통신에는 Private IP 이용
-  위처럼 스케일 아웃을 통해서 서버를 여러 대로 늘리게 되면 no failover도 해소

데이터베이스 다중화
- master -slave 관계를 설정
- 원본은 주서버에 사본은 부서버에 저장
- 쓰기 연간은 주서버에서만 가능, 부서버는 읽기 연산 지원
- 더 나은 성능, 안정성, 가용성

<img src="img/Clustering.png" width="150" height="150"/>
- 사용자는 DNS로부터 로드밸런서의 공개 IP 주소를 받음.
- 사용자는 해당 IP 주소를 사용해 로드밸런서에 접속.
- HTTP 요청은 서버 1이나 서버 2로 전송.
- 웹 서버는 사용자의 데이터를 부 데이터베이스 서버에서 읽음.
- 웹 서버는 데이터 변경 연산은 주 데이터베이스로 전달
